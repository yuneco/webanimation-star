var b=Object.defineProperty;var C=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>(C(e,typeof t!="symbol"?t+"":t,n),n);const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};x();const W=e=>e/180*Math.PI,c=(e=0,t=0)=>({x:e,y:t}),E=(e,t)=>{const n=W(t);return c(Math.cos(n)*e,Math.sin(n)*e)},y=e=>e[Math.floor(e.length*Math.random())],d=(e,t)=>e+(t-e)*Math.random(),M=(e,t=10)=>c(e.x+(Math.random()-.5)*t,e.y+(Math.random()-.5)*t);class ${constructor(){a(this,"id");a(this,"lastTime");a(this,"onrun");this.id=void 0,this.lastTime=0}start(t){this.id&&this.stop();const n=1e3/t,o=()=>{var l;const s=Date.now()-this.lastTime;this.lastTime=Date.now();const r=s/n;(l=this.onrun)==null||l.call(this,r)};this.id=setInterval(o,n)}stop(){clearTimeout(this.id),this.id=void 0}}const w=(e,t)=>{const n=e.hasWrapper?e.elWrapper:e.el;n!==t&&t.appendChild(n)},L=()=>{const e=[1,4,7,10,13,16],t=[2,3,5,6,8,9,11,12,14,15,17,18],n=Math.random()>.8;return`./imgs/star${y(n?t:e).toString().padStart(2,"0")}.svg`},f={},N=async e=>{const n=await(await fetch(e)).text();return`data:image/svg+xml;charset=utf8,${encodeURIComponent(n)}`},T=async e=>{var t;return f[e]=(t=f[e])!=null?t:N(e)},A=(e,t)=>{T(t).then(n=>{e.style.backgroundImage=`url('${n}')`})},v=e=>{const t=e.style;t.position="absolute",t.left="0",t.top="0",t.width="100px",t.height="100px",t.imageRendering="pixelated",t.visibility="hidden",t.backgroundRepeat="no-repeat",t.willChange="transform",A(e,L())},I=e=>{const t=document.createElement("div"),n={el:t,hasWrapper:!1};return e.appendChild(t),v(n.el),n},q=1e3,B=(e,t)=>{const n={visibility:"visible",opacity:1,transform:`
      translate(${t.pos.x}px, ${t.pos.y}px) 
      scale(0) 
      rotate(${t.angle*-.3}deg)
    `},o=.1,s={visibility:"visible",opacity:1,transform:`
      translate(${t.vec.x*o+t.pos.x}px, ${t.vec.y*o+t.pos.y}px) 
      scale(${t.scale}) 
      rotate(0deg)
    `,offset:o},r={visibility:"hidden",opacity:t.alpha,transform:`
      translate(${t.vec.x+t.pos.x}px, ${t.vec.y+t.pos.y}px) 
      scale(0) 
      rotate(${t.angle}deg)
    `};return e.animate([n,s,r],{duration:t.duration,iterations:1})},g=(e,t,n)=>{const o=t.duration/1e3*q/2,s={transform:"translateY(0px)"},r={transform:`translateY(${o}px)`};return e.animate([s,r],{duration:t.duration,iterations:1,easing:"cubic-bezier(.37,.01,.96,.58)",composite:n?"accumulate":"replace"})},F=(e,t)=>{const n=B(e.el,t),o=e.hasWrapper?g(e.elWrapper,t,!1):g(e.el,t,!0);return[n,o]},O=e=>{const t=e.style;t.position="absolute",t.left="0",t.top="0",t.willChange="transform"},P=e=>{const t=document.createElement("div"),n=document.createElement("div"),o={el:t,elWrapper:n,hasWrapper:!0};return e.appendChild(n),n.appendChild(t),v(o.el),O(n),o},S=e=>{var n;const t=e.hasWrapper?e.elWrapper:e.el;(n=t.parentNode)==null||n.removeChild(t)},u=[],m=[];let p="wrapper";const Y=()=>{[...u,...m].forEach(S),u.length=0,m.length=0},k=(e,t)=>{const n=t==="composite";p!==t&&(console.log("\u30CE\u30FC\u30C9\u30D7\u30FC\u30EB\u3092\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3059"),Y(),p=t);const o=(n?u:m).pop();return o?(w(o,e),o):(n?I:P)(e)},R=e=>{const t=e.hasWrapper?"wrapper":"composite";if(p!==t){S(e);return}e.hasWrapper?m.push(e):u.push(e)},X=async(e,t)=>{const n=k(e,t.animationMode),o=F(n,t);await Promise.all(o.map(s=>s.finished)),R(n)},_=4,D=(e,t,n,o,s)=>{X(e,{pos:M(n,40),duration:o,vec:s,scale:d(.15,.6),angle:d(-1800,1800),alpha:1,animationMode:t})};class G{constructor(t){a(this,"timer",new $);a(this,"parent");a(this,"mode","wrapper");a(this,"nps",10);a(this,"pos",c());a(this,"vec",c(100,100));a(this,"duration",3e3);var n;this.parent=(n=document.querySelector(t))!=null?n:document.body,this.timer.onrun=o=>this.emit(o)}start(){this.timer.start(this.nps)}stop(){this.timer.stop()}emit(t=1){const n=Math.min(_,Math.max(1,Math.round(t)));for(let o=0;o<n;o++)D(this.parent,this.mode,this.pos,this.duration,this.vec)}}const z=(e,t,n)=>{new Array(n).fill(0).map(s=>document.createElement("div")).forEach(s=>{const r=s.style;r.position="absolute",r.left="-50%",r.top=`${d(0,100)}%`,r.width="200%",r.height=`${d(3,20)}%`,r.transform=`rotate(${d(-20,20)}deg)`,r.opacity=`${d(.1,.5)}`,r.backgroundColor=y(t),r.mixBlendMode="darken",e.appendChild(s)})},h=".stage",i=new G(h),H=()=>{const e=document.querySelector(".bglines");!e||z(e,["#131c38","#201a33","#23285e","#1d1c47","#2e1657"],20)},K=()=>{setInterval(()=>{const t=document.querySelector(".status");if(!t)return;const n=document.querySelectorAll(`${h} div`).length;t.textContent=`${n} elements`},1e3)},U=()=>{const e=document.querySelector("#mode");e.addEventListener("change",()=>{const t=e.value;(t==="composite"||t==="wrapper")&&(i.mode=t)})},j=()=>{const e=document.querySelector(h);if(!e)return;const t=e.clientWidth>500;i.pos=c(e.clientWidth/2,e.clientHeight/2),i.vec=E(1300,-90),i.nps=t?25:15,e.addEventListener("mousemove",n=>{i.pos=c(n.clientX,n.clientY)}),e.addEventListener("touchmove",n=>{const o=n.touches[0];i.pos=c(o.clientX,o.clientY)}),document.addEventListener("visibilitychange",()=>{console.log(document.visibilityState),i[document.visibilityState==="hidden"?"stop":"start"]()}),i.start()};H();U();j();K();
