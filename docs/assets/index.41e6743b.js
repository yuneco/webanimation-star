var b=Object.defineProperty;var S=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var a=(e,t,n)=>(S(e,typeof t!="symbol"?t+"":t,n),n);const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};$();const M=e=>e/180*Math.PI,l=(e=0,t=0)=>({x:e,y:t}),w=(e,t)=>{const n=M(t);return l(Math.cos(n)*e,Math.sin(n)*e)},m=e=>e[Math.floor(e.length*Math.random())],c=(e,t)=>e+(t-e)*Math.random(),E=(e,t=10)=>l(e.x+(Math.random()-.5)*t,e.y+(Math.random()-.5)*t),W=(e,t,n=1,s=0,o=1)=>({duration:e,vec:t,scale:n,angle:s,alpha:o}),L=1e3,T=(e,t,n,s,o)=>{const i={visibility:"visible",opacity:1,transform:`
      translate(${n.x}px, ${n.y}px) 
      scale(0) 
      rotate(${o.angle*-.3}deg)
    `},r=.1,p={visibility:"visible",opacity:1,transform:`
      translate(${o.vec.x*r+n.x}px, ${o.vec.y*r+n.y}px) 
      scale(${s}) 
      rotate(0deg)
    `,offset:r},h={visibility:"hidden",opacity:o.alpha,transform:`
      translate(${o.vec.x+n.x}px, ${o.vec.y+n.y}px) 
      scale(${o.scale*s}) 
      rotate(${o.angle}deg)
    `},f=e.animate([i,p,h],{duration:o.duration,iterations:1}),g=o.duration/1e3*L/2,y={transform:"translateY(0px)"},v={transform:`translateY(${g}px)`},x=t.animate([y,v],{duration:o.duration,iterations:1,easing:"cubic-bezier(.37,.01,.96,.58)"});return[f,x]},A=()=>{const e=[1,4,7,10,13,16],t=[2,3,5,6,8,9,11,12,14,15,17,18],n=Math.random()>.8;return`./imgs/star${m(n?t:e).toString().padStart(2,"0")}.svg`},d={},I=async e=>{const n=await(await fetch(e)).text();return`data:image/svg+xml;charset=utf8,${encodeURIComponent(n)}`},C=async e=>{var t;return d[e]=(t=d[e])!=null?t:I(e)},O=(e,t)=>{C(t).then(n=>{e.style.backgroundImage=`url('${n}')`})},N=e=>{const t=e.style;t.position="absolute",t.left="0",t.top="0",t.willChange="transform"},k=e=>{const t=e.style;t.position="absolute",t.left="0",t.top="0",t.width="100px",t.height="100px",t.imageRendering="pixelated",t.visibility="hidden",t.backgroundRepeat="no-repeat",t.willChange="transform",O(e,A())},u=[],F=(e,t)=>{const n={el:document.createElement("div"),elWrapper:document.createElement("div"),anims:[],option:t};return e.appendChild(n.elWrapper),n.elWrapper.appendChild(n.el),N(n.elWrapper),k(n.el),n},R=async(e,t)=>{const n=e.option.pos,s=e.option.size/100;e.anims.push(...T(e.el,e.elWrapper,n,s,t)),await Promise.all(e.anims.map(o=>o.finished)),e.anims.length=0},Y=(e,t)=>{e.anims.forEach(n=>n.cancel()),Object.assign(e.option,t)},q=(e,t)=>{const n=u.pop();return n?(Y(n,t),n):F(e,t)},B=async(e,t,n)=>{const s=q(e,t);await R(s,n),u.push(s)},X=(e,t=10,n="#ffff00")=>({pos:e,size:t,color:n});class _{constructor(){a(this,"id");a(this,"lastTime");a(this,"onrun");this.id=void 0,this.lastTime=0}start(t){this.id&&this.stop();const n=1e3/t,s=()=>{var r;const o=Date.now()-this.lastTime;this.lastTime=Date.now();const i=o/n;(r=this.onrun)==null||r.call(this,i)};this.id=setInterval(s,n)}stop(){clearTimeout(this.id),this.id=void 0}}const z=4,D=(e,t,n,s)=>{B(e,X(E(t,40),c(15,60)),W(n,s,c(0,0),c(-1800,1800),1))};class G{constructor(t){a(this,"timer",new _);a(this,"parent");a(this,"nps",10);a(this,"pos",l());a(this,"vec",l(100,100));a(this,"duration",3e3);this.parent=t,this.timer.onrun=n=>this.emit(n)}start(){this.timer.start(this.nps)}stop(){this.timer.stop()}emit(t=1){const n=Math.min(z,Math.max(1,Math.round(t)));for(let s=0;s<n;s++)D(this.parent,this.pos,this.duration,this.vec)}}const P=(e,t,n)=>{new Array(n).fill(0).map(o=>document.createElement("div")).forEach(o=>{const i=o.style;i.position="absolute",i.left="-50%",i.top=`${c(0,100)}%`,i.width="200%",i.height=`${c(3,20)}%`,i.transform=`rotate(${c(-20,20)}deg)`,i.opacity=`${c(.1,.5)}`,i.backgroundColor=m(t),i.mixBlendMode="darken",e.appendChild(o)})},j=()=>{const e=document.querySelector(".bglines");!e||P(e,["#131c38","#201a33","#23285e","#1d1c47","#2e1657"],20)},H=()=>{const e=document.querySelector(".stage");if(!e)return;const t=new G(e),n=e.clientWidth>500;t.pos=l(e.clientWidth/2,e.clientHeight/2),t.vec=w(1300,-90),t.nps=n?25:15,e.addEventListener("mousemove",s=>{t.pos=l(s.clientX,s.clientY)}),e.addEventListener("touchmove",s=>{const o=s.touches[0];t.pos=l(o.clientX,o.clientY)}),document.addEventListener("visibilitychange",()=>{console.log(document.visibilityState),t[document.visibilityState==="hidden"?"stop":"start"]()}),t.start()};j();H();
